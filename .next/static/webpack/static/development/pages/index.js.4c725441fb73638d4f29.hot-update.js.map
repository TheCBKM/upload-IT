{"version":3,"file":"static/webpack/static/development/pages/index.js.4c725441fb73638d4f29.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import ipfs from '../ipfs';\nimport React, { Component } from 'react'\n\nconst accepts = [\n    { name: \"images\", acc: \"image/*\", },\n    { name: \"audio\", acc: \"audio/*\", },\n    { name: \"pdf\", acc: \"application/pdf,application/msword,\" }\n\n]\n\n\n\n\nexport class index extends Component {\n    state = {\n        file: null,\n        ipfsHash: null,\n        fileformat: \"null\",\n        fileLoaded: false,\n        formatLoaded: false\n    }\n\n    captureChange = (event) => {\n        console.log(\"caputreFile\")\n        event.preventDefault()\n        const file = event.target.files[0]\n        const reader = new window.FileReader()\n        reader.readAsArrayBuffer(file)\n        reader.onloadend = () => {\n            this.setState({\n                file: Buffer(reader.result),\n                fileLoaded: true\n            })\n            console.log('buffer', this.state.file)\n        }\n    }\n\n    submit = async () => {\n        event.preventDefault()\n        console.log(\"onSubmit\")\n        ipfs.files.add(this.state.file, async (err, res) => {\n            if (err) {\n                console.error(err)\n                console.log(\"error\")\n                return\n            }\n\n            await this.setState({\n                ipfsHash: res[0].hash,\n                fileLoaded: true,\n                formatLoaded: false\n            })\n            console.log(res)\n            console.log('ipfsHash', this.state)\n        })\n    }\n    format = async (event) => {\n        let value = event.target.value\n        if (value == \"Choose....\") {\n            await this.setState(\n                {\n                    formatLoaded: false\n                }\n            )\n            return\n        }\n\n        let format = accepts.find(a => a.name == value).acc\n        await this.setState({\n            fileformat: format ? format : null,\n            formatLoaded: true\n\n        })\n        console.log(this.state)\n\n\n\n    }\n    render() {\n        return (\n            <div>\n                <select onChange={this.format}>\n                    <option>Choose....</option>\n                    {\n                        accepts.map(a =>\n                            <option>{a.name}</option>\n                        )\n                    }\n                </select><br />\n                {this.state.formatLoaded ?\n                    <div>\n                        <input type=\"file\" multiple onChange={this.captureChange} accept={this.state.fileformat} />\n                        <br />\n\n                        {this.state.fileLoaded ? <button onClick={this.submit}>Submit</button> : \"Load file\"}\n                    </div>\n\n                    : \"Select format\"}\n                <br />\n                {this.state.ipfsHash ? this.state.ipfsHash : \"Upload some file\"}\n\n\n\n                {this.state.fileformat == 'audio/*' ? <audio controls>\n                    <source src={`https://ipfs.io/ipfs/${this.state.ipfsHash}`} />\n                </audio> :\n                    this.state.fileformat = 'image/*' ?\n                        <img src={`https://ipfs.io/ipfs/${this.state.ipfsHash}`} />\n                        :\n                        <a href={`https://ipfs.io/ipfs/${this.state.ipfsHash}`}>Link</a>\n\n                }\n\n\n\n\n\n            </div>\n        )\n    }\n}\n\nexport default index\n\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAOA;AAAA;AACA;AADA;AACA;AADA;AAAA;AACA;AADA;AACA;AADA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAEA;AACA;AACA;AACA;AACA;AALA;AACA;AAFA;AAUA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAFA;AACA;AAGA;AACA;AACA;AACA;AAvBA;AAwBA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AACA;AADA;AAAA;AAAA;AAQA;AACA;AACA;AAHA;AACA;AARA;AAYA;AACA;AACA;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAzBA;AA2CA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAKA;AADA;AACA;AALA;AAAA;AACA;AADA;AAWA;AAAA;AAAA;AAXA;AAAA;AAaA;AACA;AAFA;AACA;AAbA;AAiBA;AACA;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AA5CA;AAAA;AACA;AADA;AAAA;AAAA;AAiEA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEA;AAUA;AA1GA;AACA;AADA;AAAA;AA6GA;;;;;A","sourceRoot":""}